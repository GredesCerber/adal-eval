<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#161b22" />
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <title>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è</title>
  <link rel="stylesheet" href="/css/style.css?v=1.2.0" />
</head>
<body>
  <div class="container">
    <header class="header">
      <div>
        <div class="brand">üéØ Adal Eval</div>
        <div id="meLine" class="muted user-line"></div>
      </div>
      <div class="header-controls">
        <button class="theme-toggle" id="mainThemeToggle" aria-label="–¢–µ–º–∞">üåô</button>
        <button type="button" class="nav-toggle" id="navToggle" aria-label="–ú–µ–Ω—é">
          <span class="bar"></span><span>–ú–µ–Ω—é</span>
        </button>
      </div>
      <nav class="nav" id="mainNav">
        <button class="tabbtn active" data-tab="events">üìÖ –°–æ–±—ã—Ç–∏—è</button>
        <button class="tabbtn" data-tab="eval">‚≠ê –û—Ü–µ–Ω–∏—Ç—å</button>
        <button class="tabbtn" data-tab="results">üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
        <button class="tabbtn" data-tab="profile">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>
        <button class="theme-toggle nav-theme" id="navThemeToggle" aria-label="–¢–µ–º–∞">üåô</button>
        <button class="tabbtn danger" id="logout">üö™ –í—ã–π—Ç–∏</button>
      </nav>
    </header>

    <!-- ============ –°–û–ë–´–¢–ò–Ø ============ -->
    <section id="tab-events" class="panel">
      <div class="panel-header">
        <h2 class="panel-title">üìÖ –ú–æ–∏ —Å–æ–±—ã—Ç–∏—è</h2>
        <span id="eventsStatus" class="muted"></span>
      </div>
      <p class="muted info-hint">üí° –°–æ–±—ã—Ç–∏—è, –∫ –∫–æ—Ç–æ—Ä—ã–º –≤—ã –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã, –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏. –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ü–µ–Ω–∏–≤–∞—Ç—å –∏ –±—ã—Ç—å –æ—Ü–µ–Ω—ë–Ω–Ω—ã–º.</p>
      
      <!-- –°–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è –¥–ª—è –æ–±–º–∞–Ω–∞ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è -->
      <input type="text" style="display:none" aria-hidden="true" />
      <input type="password" style="display:none" aria-hidden="true" />
      
      <div class="row" style="margin-bottom:12px;">
        <input id="eventsSearch" type="search" placeholder="üîç –ü–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏—è..." style="flex:1;max-width:400px;" autocomplete="new-password" autocapitalize="off" autocorrect="off" spellcheck="false" data-lpignore="true" data-form-type="other" />
      </div>
      
      <div id="eventsGrid" class="events-grid"></div>
    </section>

    <!-- ============ –û–¶–ï–ù–ò–í–ê–ù–ò–ï ============ -->
    <section id="tab-eval" class="panel" style="display:none;">
      <div class="panel-header">
        <h2 class="panel-title">‚≠ê –û—Ü–µ–Ω–∏–≤–∞–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</h2>
      </div>
      
      <div id="evalNotActive" class="empty-state">
        <div class="empty-icon">üìã</div>
        <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏–µ</h3>
        <p>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É "–°–æ–±—ã—Ç–∏—è" –∏ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ—Å—å –∫ —Å–æ–±—ã—Ç–∏—é –¥–ª—è –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è.</p>
      </div>
      
      <div id="evalContent" style="display:none;">
        <div class="row" style="margin-bottom:12px;gap:8px;align-items:center;">
          <label style="font-weight:600;">–°–æ–±—ã—Ç–∏–µ:</label>
          <select id="evalEvent" style="min-width:200px;flex:1;max-width:400px;"></select>
        </div>
        
        <div class="row" style="margin-bottom:12px;flex-wrap:wrap;gap:8px;">
          <input id="studentQ" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –§–ò–û" style="flex:1;min-width:180px" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" name="student-search-unique" />
          <input id="studentGroup" placeholder="–ì—Ä—É–ø–ø–∞" style="width:120px" autocomplete="off" />
          <button class="btn" id="reloadStudents">‚Üª</button>
          <span class="muted" id="evalStatus"></span>
        </div>

        <div class="tablewrap">
          <table class="tbl">
            <thead><tr><th>–£—á–∞—Å—Ç–Ω–∏–∫</th><th>–ì—Ä—É–ø–ø–∞</th><th style="width:100px">–î–µ–π—Å—Ç–≤–∏–µ</th></tr></thead>
            <tbody id="studentsBody"></tbody>
          </table>
        </div>
        
        <div style="margin-top:16px;padding:12px;background:var(--card-bg);border-radius:8px;">
          <b>–í–Ω–µ—à–Ω–∏–π —É—á–∞—Å—Ç–Ω–∏–∫</b>
          <p class="muted" style="margin:4px 0 8px;">–û—Ü–µ–Ω–∏—Ç—å —á–µ–ª–æ–≤–µ–∫–∞, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ:</p>
          <div class="row" style="gap:8px;">
            <input id="externalName" placeholder="–§–ò–û —É—á–∞—Å—Ç–Ω–∏–∫–∞" style="flex:1;" autocomplete="off" autocapitalize="off" name="external-name-unique" />
            <button class="btn primary" id="openExternalModal">–û—Ü–µ–Ω–∏—Ç—å</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ –†–ï–ó–£–õ–¨–¢–ê–¢–´ ============ -->
    <section id="tab-results" class="panel" style="display:none;">
      <div class="panel-header">
        <h2 class="panel-title">üìä –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞</h2>
        <span id="resultsStatus" class="muted"></span>
      </div>
      
      <div class="row" style="margin-bottom:12px;flex-wrap:wrap;gap:8px;">
        <div class="searchable-select" style="min-width:220px;">
          <input type="text" id="resultsEventSearch" class="searchable-input" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏–µ..." autocomplete="off" />
          <input type="hidden" id="resultsEvent" />
          <div class="searchable-dropdown" id="resultsEventDropdown"></div>
        </div>
        <input id="resultsQ" placeholder="üîç –ü–æ–∏—Å–∫" style="flex:1;min-width:160px" />
        <input id="resultsGroup" placeholder="–ì—Ä—É–ø–ø–∞" style="width:120px" autocomplete="off" />
        <select id="resultsSort" style="width:140px">
          <option value="name">–ü–æ –∏–º–µ–Ω–∏</option>
          <option value="overall">–ü–æ –ò–¢–û–ì–û</option>
          <option value="raters">–ü–æ –æ—Ü–µ–Ω—â–∏–∫–∞–º</option>
        </select>
        <select id="resultsOrder" style="width:100px">
          <option value="asc">‚Üë –≤–æ–∑—Ä</option>
          <option value="desc">‚Üì —É–±—ã–≤</option>
        </select>
      </div>

      <div class="tablewrap">
        <table class="tbl">
          <thead id="resultsHead"></thead>
          <tbody id="resultsBody"></tbody>
        </table>
      </div>
    </section>

    <!-- ============ –ü–†–û–§–ò–õ–¨ ============ -->
    <section id="tab-profile" class="panel" style="display:none;">
      <h2 class="panel-title">üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
      <div class="row" style="gap:20px;flex-wrap:wrap;">
        <div style="flex:1;min-width:280px;">
          <p><b>–§–ò–û:</b> <span id="pFull"></span></p>
          <p><b>–ì—Ä—É–ø–ø–∞:</b> <span id="pGroup"></span></p>
          <p><b>–ù–∏–∫–Ω–µ–π–º:</b> <span id="pNick"></span></p>
          <p class="muted"><b>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:</b> <span id="pCreated"></span></p>
        </div>
        <div style="flex:1;min-width:280px;">
          <h3 style="margin-bottom:10px;">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</h3>
          <input id="editFull" placeholder="–§–ò–û" style="width:100%;margin-bottom:8px;" />
          <input id="editGroup" placeholder="–ì—Ä—É–ø–ø–∞" style="width:100%;margin-bottom:8px;" autocomplete="off" />
          <input id="editNick" placeholder="–ù–∏–∫–Ω–µ–π–º" style="width:100%;margin-bottom:8px;" />
          <button class="btn primary" id="saveProfile">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <span class="muted" id="profileStatus"></span>
        </div>
      </div>
      <hr style="margin:20px 0;">
      <h3>–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</h3>
      <div class="row" style="gap:8px;flex-wrap:wrap;margin-top:8px;">
        <input id="oldPass" type="password" placeholder="–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å" style="min-width:180px;" />
        <input id="newPass" type="password" placeholder="–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å" style="min-width:180px;" />
        <button class="btn" id="changePass">–°–º–µ–Ω–∏—Ç—å</button>
        <span class="muted" id="passStatus"></span>
      </div>
    </section>
  </div>

  <!-- –ú–æ–¥–∞–ª–∫–∞ –æ—Ü–µ–Ω–∫–∏ -->
  <div class="modal" id="studentModal">
    <div class="modal-content" style="max-width:800px;">
      <div class="modal-header">
        <div>
          <h3 id="mTitle"></h3>
          <p id="mSub" class="muted"></p>
        </div>
        <button class="modal-close" id="mClose">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="tablewrap" style="max-height:300px;overflow-y:auto;">
          <table class="tbl" style="font-size:13px;">
            <thead id="mHead"></thead>
            <tbody id="mBody"></tbody>
          </table>
        </div>
        <p id="mStatus" class="muted"></p>
        <hr style="margin:16px 0;">
        <h4 style="margin-bottom:10px;">–í–∞—à–∞ –æ—Ü–µ–Ω–∫–∞</h4>
        <div id="mForm"></div>
        <textarea id="mComment" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" rows="2" style="width:100%;margin-top:10px;"></textarea>
        <div class="row" style="margin-top:12px;justify-content:space-between;">
          <span id="mAddStatus" class="muted"></span>
          <button class="btn primary lg" id="mSubmit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É</button>
        </div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª–∫–∞ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ -->
  <div class="modal" id="detailModal">
    <div class="modal-content" style="max-width:900px;">
      <div class="modal-header">
        <div>
          <h3 id="dTitle">–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ü–µ–Ω–æ–∫</h3>
          <p id="dSub" class="muted"></p>
        </div>
        <button class="modal-close" id="dClose">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="tablewrap" style="max-height:400px;overflow-y:auto;">
          <table class="tbl" style="font-size:13px;">
            <thead id="dHead"></thead>
            <tbody id="dBody"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
  <div class="modal" id="confirmModal">
    <div class="modal-content" style="max-width:400px;">
      <div class="modal-header">
        <h3 id="confirmTitle">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h3>
        <button class="modal-close" id="confirmClose">‚úï</button>
      </div>
      <div class="modal-body" style="text-align:center;">
        <p id="confirmText" style="margin-bottom:20px;"></p>
        <div class="row" style="justify-content:center;gap:12px;">
          <button class="btn" id="confirmCancel">–û—Ç–º–µ–Ω–∞</button>
          <button class="btn primary" id="confirmOk">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="/js/app.js?v=1.2.0"></script>
</body>
</html>
