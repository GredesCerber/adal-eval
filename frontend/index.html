<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Оценивание студентов</title>
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <div class="brand">Платформа оценивания студентов</div>
        <div class="muted" id="meLine" style="margin-top:4px"></div>
      </div>
      <button class="nav-toggle" id="navToggle" aria-label="Меню">
        <span class="bar"></span>
        <span>Меню</span>
      </button>
      <div class="nav">
        <button class="tabbtn active" data-tab="eval">Оценивание</button>
        <button class="tabbtn" data-tab="results">Итоги</button>
        <button class="tabbtn" data-tab="profile">Профиль</button>
        <a class="tabbtn" href="/admin.html">Админ</a>
        <button class="tabbtn" id="logout">Выход</button>
      </div>
    </div>

    <div id="tab-eval" class="panel" style="margin-top:14px;">
      <div class="row">
        <input id="studentQ" placeholder="Поиск (ФИО/никнейм)" style="flex:1" />
        <input id="studentGroup" name="group_filter_eval" placeholder="Группа" style="width:180px" autocomplete="new-password" autocapitalize="off" autocorrect="off" spellcheck="false" readonly />
        <button class="btn" id="reloadStudents">Обновить</button>
        <span id="evalStatus" class="muted"></span>
      </div>
      <div class="tablewrap" style="margin-top:12px;">
        <table>
          <thead>
            <tr>
              <th>Студент</th>
              <th>Группа</th>
              <th>Действия</th>
            </tr>
          </thead>
          <tbody id="studentsBody"></tbody>
        </table>
      </div>
    </div>

    <div id="tab-results" class="panel" style="margin-top:14px; display:none;">
      <div class="row">
        <input id="resultsQ" placeholder="Поиск (ФИО/никнейм)" style="flex:1" />
        <input id="resultsGroup" name="group_filter_results" placeholder="Группа" style="width:180px" autocomplete="new-password" autocapitalize="off" autocorrect="off" spellcheck="false" readonly />
        <select id="resultsSort" style="width:180px">
          <option value="name">Сортировка: имя</option>
          <option value="overall">Сортировка: общий средний</option>
        </select>
        <select id="resultsOrder" style="width:140px">
            <option value="asc">По возрастанию</option>
            <option value="desc">По убыванию</option>
        </select>
        <button class="btn" id="reloadResults" style="display:none">Обновить</button>
        <span id="resultsStatus" class="muted"></span>
      </div>
      <div class="tablewrap" style="margin-top:12px;">
        <table>
          <thead id="resultsHead"></thead>
          <tbody id="resultsBody"></tbody>
        </table>
      </div>
    </div>

    <div id="tab-profile" class="panel" style="margin-top:14px; display:none;">
      <div class="row">
        <div>
          <div class="muted">ФИО</div>
          <div id="pFull"></div>
        </div>
        <div>
          <div class="muted">Группа</div>
          <div id="pGroup"></div>
        </div>
        <div>
          <div class="muted">Никнейм</div>
          <div id="pNick"></div>
        </div>
        <div>
          <div class="muted">Регистрация</div>
          <div id="pCreated"></div>
        </div>
      </div>

      <div style="margin-top:14px;" class="panel">
        <div class="row">
          <input id="oldPass" type="password" placeholder="Старый пароль" style="flex:1" />
          <input id="newPass" type="password" placeholder="Новый пароль" style="flex:1" />
          <button class="btn primary" id="changePass">Сменить пароль</button>
          <span id="passStatus" class="muted"></span>
        </div>
      </div>
    </div>
  </div>

  <!-- Student modal -->
  <div class="modal" id="studentModal">
    <div class="modal-card">
      <div class="modal-head">
        <div>
          <div style="font-weight:700" id="mTitle">Студент</div>
          <div class="muted" id="mSub"></div>
        </div>
        <button class="modal-close" id="mClose">Закрыть</button>
      </div>

      <div class="panel" style="margin-top:10px;">
        <div class="row">
          <div class="badge">Оценки</div>
          <div class="spacer"></div>
          <span class="muted" id="mStatus"></span>
        </div>
        <div class="tablewrap" style="margin-top:10px;">
          <table>
            <thead id="mHead"></thead>
            <tbody id="mBody"></tbody>
          </table>
        </div>
      </div>

      <div class="panel" style="margin-top:10px;">
        <div class="row">
          <div class="badge" id="mFormTitle">Ваша оценка</div>
          <div class="spacer"></div>
          <span class="muted" id="mAddStatus"></span>
        </div>
        <div id="mForm" style="margin-top:10px;"></div>
        <div class="row" style="margin-top:10px;">
          <textarea id="mComment" placeholder="Комментарий"></textarea>
        </div>
        <div class="row" style="margin-top:10px;">
          <button class="btn primary" id="mSubmit">Сохранить оценку</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="/js/app.js"></script>
</body>
</html>
