<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Админ-панель</title>
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <div class="brand">Администратор · Платформа оценивания студентов</div>
      </div>
      <div class="nav">
        <a class="tabbtn" href="/login.html">Вход пользователя</a>
      </div>
    </div>

    <div class="panel" style="margin-top:14px;" id="adminAuthPanel">
      <div class="row">
        <input id="aLogin" placeholder="Логин администратора" style="width:220px" />
        <input id="aPass" type="password" placeholder="Пароль администратора" style="width:240px" />
        <button class="btn primary" id="aEnter">Войти</button>
        <span class="muted" id="aStatus"></span>
      </div>
    </div>

    <div class="panel" style="margin-top:14px; display:none;" id="adminApp">
      <div class="row">
        <button class="tabbtn active" data-atab="users">Пользователи</button>
        <button class="tabbtn" data-atab="criteria">Критерии</button>
        <button class="tabbtn" data-atab="evals">Оценки</button>
        <button class="tabbtn" data-atab="audit">Логи</button>
        <div class="spacer"></div>
        <button class="tabbtn" id="aLogout">Выйти</button>
      </div>

      <!-- Users -->
      <div id="a-users" style="margin-top:12px;">
        <div class="row">
          <input id="uQ" placeholder="Поиск" style="flex:1" />
          <input id="uGroup" name="group_filter_admin" placeholder="Группа" style="width:180px" autocomplete="new-password" autocapitalize="off" autocorrect="off" spellcheck="false" readonly />
          <button class="btn" id="uReload">Обновить</button>
          <button class="btn primary" id="uAdd">Добавить</button>
          <span class="muted" id="uStatus"></span>
        </div>
        <div class="tablewrap" style="margin-top:12px;">
          <table>
            <thead>
              <tr><th>№</th><th>Ник</th><th>ФИО</th><th>Группа</th><th>Активен</th><th>Действия</th></tr>
            </thead>
            <tbody id="uBody"></tbody>
          </table>
        </div>
      </div>

      <!-- Criteria -->
      <div id="a-criteria" style="margin-top:12px; display:none;">
        <div class="row">
          <button class="btn" id="cReload">Обновить</button>
          <button class="btn primary" id="cAdd">Добавить</button>
          <span class="muted" id="cStatus"></span>
        </div>
        <div class="tablewrap" style="margin-top:12px;">
          <table>
            <thead>
              <tr><th>№</th><th>Название</th><th>Описание</th><th>Макс</th><th>Активен</th><th></th></tr>
            </thead>
            <tbody id="cBody"></tbody>
          </table>
        </div>
      </div>

      <!-- Evals -->
      <div id="a-evals" style="margin-top:12px; display:none;">
        <div class="row">
          <select id="eTarget" style="width:260px"><option value="">Оцениваемый: любой</option></select>
          <select id="eRater" style="width:260px"><option value="">Оценивающий: любой</option></select>
          <select id="eCrit" style="width:260px"><option value="">Критерий: любой</option></select>
          <label class="muted"><input id="eAnom" type="checkbox" /> только аномалии</label>
          <button class="btn" id="eReload">Обновить</button>
          <button class="btn danger" id="ePurgeAll">Удалить все оценки</button>
          <span class="muted" id="eStatus"></span>
        </div>

        <div class="tablewrap" style="margin-top:12px;">
          <table>
            <thead>
              <tr>
                <th>Оцениваемый</th><th>Оценивающий</th><th>Критерий</th><th>Балл</th><th>Среднее</th><th>Δ</th><th>z</th><th>Комментарий</th><th></th>
              </tr>
            </thead>
            <tbody id="eBody"></tbody>
          </table>
        </div>
      </div>

      <!-- Audit -->
      <div id="a-audit" style="margin-top:12px; display:none;">
        <div class="row">
          <button class="btn" id="lReload">Обновить</button>
          <span class="muted" id="lStatus"></span>
        </div>
        <div class="tablewrap" style="margin-top:12px;">
          <table>
            <thead>
              <tr><th>Когда</th><th>Действие</th><th>Сущность</th><th>№</th><th>До</th><th>После</th><th>IP</th></tr>
            </thead>
            <tbody id="lBody"></tbody>
          </table>
        </div>
      </div>

    </div>
  </div>

  <!-- Simple modal -->
  <div class="modal" id="adminModal">
    <div class="modal-card">
      <div class="modal-head">
        <div style="font-weight:700" id="amTitle">Действие</div>
        <button class="modal-close" id="amClose">Закрыть</button>
      </div>
      <div id="amBody" style="margin-top:10px;"></div>
    </div>
  </div>

  <script type="module" src="/js/admin.js"></script>
</body>
</html>
