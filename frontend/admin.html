<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#0f172a" />
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <title>–ê–¥–º–∏–Ω ¬∑ Adal Eval</title>
  <link rel="stylesheet" href="/css/style.css?v=1.2.0" />
</head>
<body>
  <div class="container">
    
    <!-- ========== –§–û–†–ú–ê –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò –ê–î–ú–ò–ù–ê ========== -->
    <div id="authPanel" class="auth-panel auth-page">
      <div class="header" style="margin-bottom:0;">
        <div class="brand">‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</div>
        <div class="nav">
          <a class="tabbtn" href="/login.html">üîô –ù–∞–∑–∞–¥</a>
          <button class="theme-toggle" aria-label="–¢–µ–º–∞">üåô</button>
        </div>
      </div>
      <div class="panel-wrapper">
        <div class="panel auth-card" style="max-width:400px;">
          <div class="auth-icon">üîê</div>
          <h2 style="margin:0 0 8px;">–í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
          <p class="muted" style="margin:0 0 20px;">–í–≤–µ–¥–∏—Ç–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</p>
          
          <form id="authForm">
            <div class="form-group">
              <label class="form-label"></label>
              <input id="aLogin" type="text" placeholder="admin" autocomplete="username" required />
            </div>
            <div class="form-group">
              <label class="form-label"></label>
              <div style="position:relative;">
                <input id="aPass" type="password" placeholder="–ü–∞—Ä–æ–ª—å" autocomplete="current-password" style="width:100%;padding-right:44px;" required />
                <button type="button" id="toggleAdminPass" class="pass-toggle" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å">‚óã</button>
              </div>
            </div>
            <button type="submit" class="btn primary lg" style="width:100%;">–í–æ–π—Ç–∏</button>
            <p id="authStatus" class="muted" style="margin-top:10px; text-align:center;"></p>
          </form>
          
          <div style="margin-top:20px; text-align:center;">
            <a href="/login.html">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≤—Ö–æ–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</a>
          </div>
        </div>
      </div>
    </div>

    <!-- ========== –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–° –ê–î–ú–ò–ù–ö–ò ========== -->
    <div id="adminApp" style="display:none;">
      
      <header class="header">
        <div>
          <div class="brand">‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</div>
        </div>
        <div class="header-controls">
          <button class="theme-toggle" id="adminThemeToggle" aria-label="–¢–µ–º–∞">üåô</button>
          <button type="button" class="nav-toggle" id="navToggle" aria-label="–ú–µ–Ω—é">
            <span class="bar"></span><span>–ú–µ–Ω—é</span>
          </button>
        </div>
        <nav class="nav" id="adminNav">
          <button class="tabbtn active" data-tab="events">üìÖ –°–æ–±—ã—Ç–∏—è</button>
          <button class="tabbtn" data-tab="criteria">üìã –ö—Ä–∏—Ç–µ—Ä–∏–∏</button>
          <button class="tabbtn" data-tab="users">üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
          <button class="tabbtn" data-tab="evals">‚≠ê –û—Ü–µ–Ω–∫–∏</button>
          <button class="theme-toggle nav-theme" id="navAdminThemeToggle" aria-label="–¢–µ–º–∞">üåô</button>
          <button class="btn danger" id="logout">–í—ã–π—Ç–∏</button>
        </nav>
      </header>

      <!-- –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Å–µ–ª–µ–∫—Ç —Å–æ–±—ã—Ç–∏—è (—Å–∫—Ä—ã—Ç –Ω–∞ –≤–∫–ª–∞–¥–∫–µ —Å–æ–±—ã—Ç–∏–π) -->
      <div class="global-event-bar" id="globalEventBar">
        <label>üìÖ –°–æ–±—ã—Ç–∏–µ:</label>
        <div class="searchable-select" id="eventSelectWrapper">
          <input type="text" id="globalEventSearch" class="searchable-input" placeholder="üîç –ü–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏—è..." autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" />
          <input type="hidden" id="globalEvent" value="" />
          <div class="searchable-dropdown" id="eventDropdown"></div>
        </div>
        <span id="globalEventStatus" class="muted"></span>
      </div>

      <!-- ========== TAB: –°–û–ë–´–¢–ò–Ø ========== -->
      <section id="tab-events" class="panel">
        <div class="panel-header">
          <h2>üìÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏</h2>
          <span id="eventsStatus" class="muted"></span>
        </div>
        <div class="actions-bar">
          <input id="eventQ" type="text" placeholder="üîç –ü–æ–∏—Å–∫..." style="flex:1;max-width:250px;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" name="admin-event-search-unique" />
          <select id="eventSort" style="width:150px;">
            <option value="id-desc">‚Üì ID (–Ω–æ–≤—ã–µ)</option>
            <option value="id-asc">‚Üë ID (—Å—Ç–∞—Ä—ã–µ)</option>
            <option value="name-asc">‚Üë –ù–∞–∑–≤–∞–Ω–∏–µ</option>
            <option value="name-desc">‚Üì –ù–∞–∑–≤–∞–Ω–∏–µ</option>
          </select>
          <button id="addEvent" class="btn primary">‚ûï –°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ</button>
        </div>
        <div class="tablewrap">
          <table>
            <thead>
              <tr><th>ID</th><th>–ù–∞–∑–≤–∞–Ω–∏–µ</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th><th>–ê–∫—Ç–∏–≤–Ω–æ</th><th>–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</th><th>–°–æ–∑–¥–∞–Ω–æ</th><th style="width:120px"></th></tr>
            </thead>
            <tbody id="eventsBody"></tbody>
          </table>
        </div>
      </section>

      <!-- ========== TAB: –ö–†–ò–¢–ï–†–ò–ò ========== -->
      <section id="tab-criteria" class="panel" style="display:none;">
        <div class="panel-header">
          <h2>üìã –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏</h2>
          <span id="critStatus" class="muted"></span>
        </div>
        <p class="muted info-hint">üí° –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Å–æ–±—ã—Ç–∏—é</p>
        <div class="actions-bar">
          <button id="addCrit" class="btn primary">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–π</button>
        </div>
        <div class="tablewrap">
          <table>
            <thead>
              <tr><th>ID</th><th>–ù–∞–∑–≤–∞–Ω–∏–µ</th><th>–ú–∞–∫—Å.–±–∞–ª–ª</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th><th>–ê–∫—Ç–∏–≤–µ–Ω</th><th style="width:120px"></th></tr>
            </thead>
            <tbody id="critBody"></tbody>
          </table>
        </div>
      </section>

      <!-- ========== TAB: –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ò ========== -->
      <section id="tab-users" class="panel" style="display:none;">
        <div class="panel-header">
          <h2>üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>
          <span id="usersStatus" class="muted"></span>
        </div>
        <div class="actions-bar">
          <input id="userQ" type="text" placeholder="üîç –ü–æ–∏—Å–∫..." style="flex:1;max-width:300px;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" />
          <input id="userGroup" type="text" placeholder="–ì—Ä—É–ø–ø–∞" style="width:120px;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" />
          <button id="reloadUsers" class="btn">‚Üª</button>
          <button id="addUser" class="btn primary">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
        <div class="tablewrap">
          <table>
            <thead>
              <tr><th>ID</th><th>–§–ò–û</th><th>–ì—Ä—É–ø–ø–∞</th><th>–ù–∏–∫</th><th>–ê–∫—Ç–∏–≤–µ–Ω</th><th style="width:180px"></th></tr>
            </thead>
            <tbody id="usersBody"></tbody>
          </table>
        </div>
      </section>

      <!-- ========== TAB: –û–¶–ï–ù–ö–ò ========== -->
      <section id="tab-evals" class="panel" style="display:none;">
        <div class="panel-header">
          <h2>‚≠ê –í—Å–µ –æ—Ü–µ–Ω–∫–∏</h2>
          <span id="evalsStatus" class="muted"></span>
        </div>
        <p class="muted info-hint">üí° –ü–æ–∫–∞–∑–∞–Ω—ã –æ—Ü–µ–Ω–∫–∏ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è</p>
        
        <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–æ–≤ -->
        <div class="view-toggle" style="margin-bottom:12px;">
          <button class="view-btn active" data-view="detail">üìã –î–µ—Ç–∞–ª—å–Ω–æ</button>
          <button class="view-btn" data-view="report">üìä –û—Ç—á—ë—Ç</button>
        </div>
        
        <div class="actions-bar">
          <input id="evalQ" type="text" placeholder="üîç –ü–æ–∏—Å–∫..." style="flex:1;max-width:200px;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" />
          <input id="evalGroup" type="text" placeholder="–ì—Ä—É–ø–ø–∞" style="width:100px;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" />
          <button id="reloadEvals" class="btn">‚Üª</button>
          <button id="exportExcel" class="btn primary">üì• Excel</button>
          <button id="purgeEvals" class="btn danger">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤—Å–µ</button>
        </div>
        <div class="tablewrap">
          <table>
            <thead id="evalsHead"></thead>
            <tbody id="evalsBody"></tbody>
          </table>
        </div>
      </section>

    </div>
  </div>

  <!-- ========== –ú–û–î–ê–õ–ö–ê: –°–û–ë–´–¢–ò–ï ========== -->
  <div class="modal" id="eventModal">
    <div class="modal-content" style="max-width:500px;">
      <div class="modal-header">
        <h3 id="eTitle">üìÖ –°–æ–±—ã—Ç–∏–µ</h3>
        <button class="modal-close" id="eClose">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
          <input id="eName" type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" />
        </div>
        <div class="form-group">
          <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
          <textarea id="eDesc" rows="3" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" autocomplete="off"></textarea>
        </div>
        <div class="form-group">
          <label><input id="eActive" type="checkbox" checked /> –ê–∫—Ç–∏–≤–Ω–æ</label>
        </div>
        <div class="row" style="margin-top:16px;gap:10px;">
          <button id="eSave" class="btn primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button id="eCancel" class="btn">–û—Ç–º–µ–Ω–∞</button>
        </div>
        <p id="eStatus" class="muted" style="margin-top:10px;"></p>
      </div>
    </div>
  </div>

  <!-- ========== –ú–û–î–ê–õ–ö–ê: –ö–†–ò–¢–ï–†–ò–ô ========== -->
  <div class="modal" id="critModal">
    <div class="modal-content" style="max-width:500px;">
      <div class="modal-header">
        <h3 id="cTitle">üìã –ö—Ä–∏—Ç–µ—Ä–∏–π</h3>
        <button class="modal-close" id="cClose">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
          <input id="cName" type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏—è" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" />
        </div>
        <div class="form-group">
          <label class="form-label">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª</label>
          <input id="cMax" type="number" step="1" min="1" value="10" style="width:120px;" autocomplete="off" />
        </div>
        <div class="form-group">
          <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
          <textarea id="cDesc" rows="2" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" autocomplete="off"></textarea>
        </div>
        <div class="form-group">
          <label><input id="cActive" type="checkbox" checked /> –ê–∫—Ç–∏–≤–µ–Ω</label>
        </div>
        <div class="row" style="margin-top:16px;gap:10px;">
          <button id="cSave" class="btn primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button id="cCancel" class="btn">–û—Ç–º–µ–Ω–∞</button>
        </div>
        <p id="cStatus" class="muted" style="margin-top:10px;"></p>
      </div>
    </div>
  </div>

  <!-- ========== –ú–û–î–ê–õ–ö–ê: –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨ ========== -->
  <div class="modal" id="userModal">
    <div class="modal-content" style="max-width:500px;">
      <div class="modal-header">
        <h3 id="uTitle">üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h3>
        <button class="modal-close" id="uClose">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">–§–ò–û</label>
          <input id="uFull" type="text" placeholder="–§–ò–û" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" />
        </div>
        <div class="form-group">
          <label class="form-label">–ì—Ä—É–ø–ø–∞</label>
          <input id="uGrp" type="text" placeholder="–ì—Ä—É–ø–ø–∞" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" />
        </div>
        <div class="form-group">
          <label class="form-label">–ù–∏–∫–Ω–µ–π–º</label>
          <input id="uNick" type="text" placeholder="–ù–∏–∫–Ω–µ–π–º" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" />
        </div>
        <div class="form-group" id="uPassGroup" style="display:none;">
          <label class="form-label">–ü–∞—Ä–æ–ª—å</label>
          <input id="uPass" type="password" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤)" autocomplete="new-password" />
        </div>
        <div class="form-group">
          <label><input id="uActive" type="checkbox" checked /> –ê–∫—Ç–∏–≤–µ–Ω</label>
        </div>
        <div class="row" style="margin-top:16px;gap:10px;">
          <button id="uSave" class="btn primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button id="uResetPass" class="btn" style="display:none;">üîë –°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
          <button id="uCancel" class="btn">–û—Ç–º–µ–Ω–∞</button>
        </div>
        <p id="uStatus" class="muted" style="margin-top:10px;"></p>
      </div>
    </div>
  </div>

  <script type="module" src="/js/admin.js?v=1.2.0"></script>
</body>
</html>
